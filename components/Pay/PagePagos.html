<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../css/pagepagos.css" />
    <title>PagePagos</title>
    <style>
      #Header {
        position: sticky;
        top: 0;
        z-index: 1000;
      }
    </style>
</head>
<body>
    <div class="estructura">
        <div id="Header"></div>
        <main id="Pay"></main>
        <div id="Footer"></div>
    </div>
    <script>
      // Cargar Header y Footer
      fetch('Header.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('Header').innerHTML = data;
          inicializarNavegacionHeader();
        });
      fetch('Footer.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('Footer').innerHTML = data;
        });
      // Carga inicial de AlquileresPagos.html
      cargarComponentePay('AlquileresPagos.html');

      // Función para cargar el contenido en <main id="Pay">
      function cargarComponentePay(ruta) {
        fetch(ruta)
          .then(response => response.text())
          .then(data => {
            // Extrae solo el contenido de <main> si existe, si no, usa todo el HTML
            const temp = document.createElement('div');
            temp.innerHTML = data;
            const mainContent = temp.querySelector('main');
            document.getElementById('Pay').innerHTML = mainContent ? mainContent.innerHTML : data;
            window.scrollTo(0, 0);
          });
      }

      // Control de navegación centralizado por el navbar del header
      function inicializarNavegacionHeader() {
        const header = document.getElementById('Header');
        // Busca el navbar solo dentro del header cargado
        const nav = header.querySelector('.navbar-pagos, .pay-navbar, nav');
        if (!nav) return;
        // Usa delegación de eventos para soportar clicks en hijos (ej: <span>)
        nav.addEventListener('click', function(e) {
          let target = e.target;
          while (target && target.tagName !== 'A' && target !== nav) {
            target = target.parentElement;
          }
          if (
            target &&
            target.tagName === 'A' &&
            target.getAttribute('href') &&
            !target.getAttribute('href').startsWith('#') &&
            (
              target.getAttribute('href') === 'AlquileresPagos.html' ||
              target.getAttribute('href') === 'Pagos.html' ||
              target.getAttribute('href') === 'HistorialViajes.html' ||
              target.getAttribute('href') === 'HistorialPagos.html' ||
              target.getAttribute('href') === 'MensajesMantenimiento.html'
            )
          ) {
            e.preventDefault();
            cargarComponentePay(target.getAttribute('href'));
          }
        });
      }
    </script>
</body>
</html>